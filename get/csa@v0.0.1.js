var o=class extends HTMLElement{url=null;loading=null;config=JSON.parse(localStorage.getItem("csa-page-wrapper-settings"));constructor(){if(super(),!this.url){this.load(this.config.defaultPage);return}this.load(this.url)}async load(t){this.config.loadingAnimation&&(this.innerHTML=this.config.loadingAnimation);try{this.innerHTML=await(await fetch(t)).text()}catch{this.innerHTML=this.config.onError||null}let r=document.querySelector("csa-page").getAttribute("title")?.match(/{ (.*) }/)?.[1],s=document.querySelector("csa-page").getAttribute("title").startsWith("!")&&r,i=this.config.formatTitle;i=r&&!s?i.replace("{}",r):s?document.querySelector("csa-page").getAttribute("title").slice(1):document.querySelector("csa-page").getAttribute("title"),document.title=i}},c=class extends HTMLElement{constructor(){super();let scripts=this.querySelectorAll("script");scripts.forEach(e=>{eval(e.text)})}},l=class extends HTMLAnchorElement{constructor(){super(),this.addEventListener("click",t=>{t.preventDefault();let r=this.getAttribute("href");document.querySelector("csa-page-wrapper").load(r)})}},n=class{save(){localStorage.setItem("csa-pagedata",JSON.stringify(window.watcher))}restore(){return JSON.parse(localStorage.getItem("csa-pagedata"))}delete(){localStorage.removeItem("csa-pagedata")}has(){return!!localStorage.getItem("csa-pagedata")}};var u=class extends HTMLElement{value=null;onChange=null;id=null;constructor(){super()}};function h(a){for(let t in a)localStorage.setItem(t,JSON.stringify(a[t]));customElements.define("csa-page-wrapper",o),customElements.define("csa-page",c),customElements.define("csa-a",l,{extends:"a"}),window.watcher={get(t){return window.watcher[t]},set(t,r){window.watcher[t]=r,document.querySelectorAll(`[csa-watch="${t}"]`).forEach(s=>s.innerHTML=r)},datas:{}}}export{l as Anchor,c as Page,n as PageData,o as PageWrapper,u as ReactiveArea,h as init};
